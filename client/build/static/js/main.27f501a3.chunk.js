(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{184:function(e,t,a){e.exports=a(222)},221:function(e,t,a){},222:function(e,t,a){"use strict";a.r(t);var n=a(24),r=a(23),c=a(18),o=a.n(c),i=a(34),l=a(43),u=a(0),s=a.n(u),p=a(279),m=a(169),d=a(117),g=Object(m.a)({palette:{custom:{primary:d.a[400],accent:"#9E4E2B"},primary:{main:"#2A9D8F",light:"#289FB5",dark:"#689F38"}}}),f=a(54),T=a(10),E=a(271),b=a(272),S=a(134),h=a(110),O=a.n(h),v=a(273),y=a(299),C=a(300),_=a(278),A=a(295),I=a(276),j=a(277),x=a(22),w=a.n(x),N=a(21),L=a(59),P=a(19),R={type:"GET_IS_LOGGEDIN"},W=function(e){return{type:"ADD_POST_TO_STATE",payload:e}},k=function(e){return{type:"ADD_TITLE_TO_STATE",payload:e}},D=function(e){return{type:"ADD_TAGS_TO_STATE",payload:e}},U=function(e){return{type:"ADD_TAG_INPUT_TO_STATE",payload:e}},G=function(e){return{type:"ADD_TAG_INPUT_SELECTED_TO_STATE",payload:e}},F=function(e){return{type:"REMOVE_TAG_FROM_TAG_ARRAY",payload:e}},H=function(e){return{type:"SET_USER_ID_IN_STATE",payload:e}},M=a(57);function V(){var e=Object(r.a)(["\n  mutation login($input: credentials) {\n    loginNow(input: $input) {\n      token\n      userId\n    }\n  }\n"]);return V=function(){return e},e}var B=Object(E.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1),display:"flex",flexDirection:"column"},submit:{margin:e.spacing(3,0,2)},warning:{color:"red"}}})),$=w()(V()),q=Object(P.b)((function(e){return{isLoggedIn:e.isLoggedIn,loginWarning:e.loginWarning,userId:e.userId,accountCreatedSuccess:e.accountCreatedSuccess}}),(function(e){return{changeLoginWarningToFalse:function(){return e({type:"CHANGE_LOGIN_WARNING_FALSE"})},changeLoginWarningToTrue:function(){return e({type:"CHANGE_LOGIN_WARNING_TRUE"})},changeLoginStatusToTrue:function(){return e({type:"CHANGE_LOGIN_STATUS_TRUE"})},getState:function(){return e({type:"DEFAULT"})},setUserIdInState:function(t){return e(H(t))},setAccountCreatedSuccessToFalse:function(){return e({type:"ACCOUNT_CREATED_SUCCESS_TO_FALSE"})}}}))((function(e){var t=e.isLoggedIn,a=e.loginWarning,r=e.changeLoginWarningToFalse,c=e.changeLoginWarningToTrue,l=e.changeLoginStatusToTrue,p=e.setUserIdInState,m=e.accountCreatedSuccess,d=e.setAccountCreatedSuccessToFalse,g=B(),E=Object(N.a)(),h=Object(N.b)($),x=Object(n.a)(h,1)[0],w=Object(M.b)().enqueueSnackbar,P=Object(u.useState)({email:"",password:""}),R=Object(n.a)(P,2),W=R[0],k=R[1];Object(u.useEffect)((function(){d()}),[]);var D=function(){var e=Object(i.a)(o.a.mark((function e(t,a){var n,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,x({variables:{input:{email:W.email,password:W.password}}});case 3:if(n=e.sent,i=n.data,console.log(i),null!==i.loginNow.token){e.next=10;break}return e.next=9,c();case 9:setTimeout((function(){r()}),4e3);case 10:if(null===i.loginNow.token){e.next=16;break}return e.next=13,p(i.loginNow.userId);case 13:return e.next=15,l();case 15:G(i.loginNow.token);case 16:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),U=function(e){k(Object(T.a)(Object(T.a)({},W),{},Object(f.a)({},e.target.name,e.target.value)))},G=function(e){localStorage.setItem("AUTH_TOKEN",e)};return t?s.a.createElement(L.a,{to:"/"}):s.a.createElement(s.a.Fragment,null,s.a.createElement(b.a,{className:g.root,maxWidth:"xs"},s.a.createElement(v.a,null),s.a.createElement("div",{className:g.paper},s.a.createElement(y.a,{className:g.avatar},s.a.createElement(O.a,null)),s.a.createElement(S.a,{component:"h1",variant:"h5"},"Sign In"),m&&w("Account Created!",{variant:"success"}),a&&s.a.createElement(C.a,{className:g.warning},"We do not recognise that user or password, please recheck your credentials"),s.a.createElement("form",{className:g.form,noValidate:!0},s.a.createElement(A.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,error:a,helperText:a?"Please verify your email was entered correctly.":"",onChange:U,value:W.email,id:"email",label:"email address",name:"email",autoComplete:"email",autoFocus:!0}),s.a.createElement(A.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,error:a,helperText:a?"Please verify your password is correct.":"",onChange:U,value:W.password,id:"password",label:"password",name:"password",type:"password",autoComplete:"current-password"}),s.a.createElement(I.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(e){return D(e,E)},className:g.submit},"Sign In"),s.a.createElement(j.a,{container:!0},s.a.createElement(j.a,{item:!0},s.a.createElement(_.a,{href:"/create_account",variant:"body2"},"Dont have an account? Sign Up"))))),s.a.createElement(C.a,{mt:8})))})),z=a(162),J=a.n(z),Q=a(72),X=a.n(Q),Y=a(115),K=a(280),Z=a(281),ee=a(282),te=a(283),ae=X()((function(e){return{root:{maxWidth:345},media:{height:140},cardContent:{width:"100%"},title:{fontSize:"1rem",width:"100%",display:"block"}}})),ne=function(e){var t=e.postTitle,a=e.postBody,n=(e.postId,ae());return s.a.createElement(K.a,{className:n.root,raised:!0},s.a.createElement(Z.a,null,s.a.createElement(ee.a,{className:n.media,image:"https://picsum.photos/345/140",title:"Test Post"}),s.a.createElement(te.a,{className:n.cardContent},s.a.createElement(S.a,{gutterBottom:!0,variant:"h6",align:"left",component:"p",className:n.title},t),s.a.createElement(S.a,{noWrap:!0,variant:"body2",color:"textSecondary",component:"p",align:"center"},a))))};function re(){var e=Object(r.a)(["\n    query {\n      getAllPosts {\n        postTitle\n        postContent\n        views\n        tags\n        _id\n      }\n    }\n  "]);return re=function(){return e},e}var ce=a(0).useEffect,oe=X()((function(e){return{search:{marginBottom:"150px",width:"100%"},post:{height:"400px",marginTop:"-100px"},break:Object(f.a)({},e.breakpoints.down("sm"),{justifyContent:"center"})}})),ie=Object(P.b)((function(e){return{submitSuccessful:e.submitSuccessful,allPosts:e.allPosts,searchInputState:e.searchInputState,searchRegex:e.searchRegex,postToRead:e.postToRead}}),(function(e){return{resetSubmit:function(){return e({type:"RESET_SUBMIT"})},setSearchInputState:function(t){return e(function(e){return{type:"SET_SEARCH_STATE",payload:e}}(t))},setSearchRegex:function(t){return e(function(e){return{type:"SET_SEARCH_REGEX",payload:e}}(t))},setPostToRead:function(t){return e(function(e){return{type:"SET_POST_TO_READ",payload:e}}(t))}}}))((function(e){e.props;var t=e.resetSubmit,a=e.submitSuccessful,n=e.searchInputState,r=e.setSearchInputState,c=e.searchRegex,o=e.setSearchRegex,i=e.setPostToRead,l=e.postToRead,u=(Object(N.a)(),w()(re()));ce((function(){return t(),function(){i("")}}),[]);var p=oe(),m=Object(M.b)().enqueueSnackbar,d=new RegExp(c,"i");return l.length>0?s.a.createElement(L.a,{to:"/post/".concat(l)}):s.a.createElement(b.a,{maxWidth:"md"},a&&m("Post Added!",{variant:"success"}),s.a.createElement(C.a,{mt:10},s.a.createElement(j.a,{container:!0,className:"".concat(p.break," ").concat(p.search)},s.a.createElement(j.a,{item:!0},s.a.createElement(J.a,null)),s.a.createElement(j.a,{item:!0,style:{display:"block",width:"80%"}},s.a.createElement(A.a,{placeholder:"Search by content or tag...",fullWidth:!0,value:n,onChange:function(e){r(e.target.value),o(e.target.value)}})))),s.a.createElement(C.a,{mt:4},s.a.createElement(j.a,{container:!0,spacing:1,direction:"row",className:p.break},s.a.createElement(Y.a,{query:u,fetchPolicy:"no-cache"},(function(e){var t=e.data,a=e.error;return e.loading?"loading....":a?"something went wrong....":s.a.createElement(s.a.Fragment,null,t.getAllPosts.map((function(e,t){var a=e.tags.filter((function(e){return d.test(e)}));return d.test(e.postTitle)||d.test(e.postContent)||a.length>0?s.a.createElement(j.a,{key:t,item:!0,className:p.post,sm:4,onClick:function(){return t=e._id,void i(t);var t}},s.a.createElement(ne,{postTitle:e.postTitle,postBody:e.postContent})):null})))})))))})),le=a(32),ue=Object(E.a)((function(e){return{nav:{backgroundColor:e.palette.primary.light,height:"100px",width:"100vw",display:"flex",justifyContent:"flex-end"},navLinks:{color:e.palette.text.primary,padding:0,width:"100%",height:"100%",margin:0},links:{marginRight:"40px",fontSize:e.typography.fontSize,color:e.palette.primary.contrastText,textDecoration:"none","&:hover":{color:e.palette.text.secondary,textDecoration:"none"}}}})),se=Object(P.b)((function(e){return{isLoggedIn:e.isLoggedIn}}),(function(e){return{logout:function(){return e({type:"LOGOUT"})}}}))((function(e){e.props;var t=e.isLoggedIn,a=e.logout,n=ue();return s.a.createElement(C.a,{component:"nav",className:n.nav},s.a.createElement(v.a,null),s.a.createElement(j.a,{container:!0,justify:"flex-end",alignItems:"center",spacing:3,className:n.navLinks},s.a.createElement(j.a,{item:!0},s.a.createElement(le.b,{className:n.links,to:"/home"},"Home")),t&&s.a.createElement(j.a,{item:!0},s.a.createElement(le.b,{className:n.links,to:"/add_post"},"Add Post")),t&&s.a.createElement(j.a,{item:!0},s.a.createElement(le.b,{className:n.links,to:"/all_posts"},"Edit Posts")),t&&s.a.createElement(j.a,{item:!0},s.a.createElement(le.b,{className:n.links,onClick:function(){return a()}},"Logout"))))})),pe=a(301),me=a(296),de=a(284);function ge(){var e=Object(r.a)(["\n        mutation amend ($postId: String , $post: newPost){\n            amendPost(postId: $postId, post: $post){\n                postTitle\n            }\n        }\n    "]);return ge=function(){return e},e}function fe(){var e=Object(r.a)(["\n        query getSpecific ($postId: String){\n            getSpecificPost(postId: $postId){\n\n                postTitle\n                postContent\n                tags\n            }\n        }\n    "]);return fe=function(){return e},e}var Te=a(0).useEffect,Ee=a(0).useRef,be=Object(E.a)((function(e){return{inputPost:{width:"80%",marginTop:"0"},formContainer:{display:"flex",justifyContent:"center",flexDirection:"column",marginTop:"0.5rem",alignContent:"center"},loadingContainer:{display:"flex",justifyContent:"center",alignContent:"center"},wordCount:{marginTop:"10px",color:"red"},title:{marginTop:"1rem"},chip:{width:""},chipContainer:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap","& > *":{margin:e.spacing(.5)},marginTop:"2rem",width:"30%"},tagInput:{width:"20%"},autocompleteInput:{},button:{marginTop:"20px",width:"15%"}}})),Se=[{title:"Python"},{title:"Javascript"},{title:"Java"},{title:"HTML"},{title:"CSS"},{title:"C++"}],he=Object(P.b)((function(e){return{postText:e.postText,currentPostWordCount:e.currentPostWordCount,titleText:e.titleText,tagInputValue:e.tagInputValue,tagsArray:e.tagsArray,tagInputValueSelected:e.tagInputValueSelected,submitSuccessful:e.submitSuccessful,userId:e.userId}}),(function(e){return{addPostToLocalState:function(t){return e(W(t))},addTitleToLocalState:function(t){return e(k(t))},addTagsToLocalState:function(t){return e(D(t))},addTagInputToLocalState:function(t){return e(U(t))},addTagInputSelectedToLocalState:function(t){return e(G(t))},deleteTagFromState:function(t){return e(F(t))},getPostFromLocalState:function(){return e({type:"GET_POST_FROM_LOCAL_STATE"})},submitSuccessfulDispatch:function(){return e({type:"SUBMIT_SUCCESSFUL"})},resetTagsState:function(){return e({type:"RESET_TAGS_STATE"})}}}))((function(e){e.props;var t=e.currentPostWordCount,a=e.postText,r=e.addTagsToLocalState,c=e.addPostToLocalState,l=e.titleText,p=e.addTitleToLocalState,m=e.tagInputValue,d=e.addTagInputToLocalState,g=e.tagsArray,f=e.tagInputValueSelected,T=e.addTagInputSelectedToLocalState,E=e.deleteTagFromState,S=e.submitSuccessful,h=e.submitSuccessfulDispatch,O=e.userId,y=e.resetTagsState,C=be(),_=Object(L.g)(),j=w()(fe()),x=Object(N.c)(j,{fetchPolicy:"no-cache",variables:{postId:_.id}}),P=x.data,R=x.loading;x.error;Te((function(){if(P){y();var e=P.getSpecificPost.tags;0==e.length||e.map((function(e){r(e)})),p(P.getSpecificPost.postTitle),c(P.getSpecificPost.postContent)}}),[P]);var W=Ee([]);W.current.length!==g.length&&(W.current=Array(g.length).fill().map((function(e,t){return W.current[t]||Object(u.createRef)()})));var k=w()(ge()),D=Object(N.b)(k),U=Object(n.a)(D,2),G=U[0],F=(U[1],Ee(null),function(e){e.preventDefault();var t=e.target.value;switch(e.target.id){case"post-body":return void c(t);case"post-title":return void p(t);default:return}});function H(){return(H=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={postContent:a,postTitle:l,tags:g,user:O},e.prev=2,e.next=5,G({variables:{postId:_.id,post:n}});case 5:h(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),alert("There was an error");case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}return S?(p(""),c(""),r(""),s.a.createElement(L.a,{to:"/"})):R?s.a.createElement("div",{className:C.loadingContainer},s.a.createElement(de.a,null)):s.a.createElement(b.a,null,s.a.createElement(v.a,null),s.a.createElement("form",{className:C.formContainer},s.a.createElement("h2",{className:C.title},"Post Title"),s.a.createElement(A.a,{className:C.inputPost,onChange:F,value:l,id:"post-title"}),s.a.createElement("h2",{className:C.title},"Content"),s.a.createElement(A.a,{className:C.inputPost,id:"post-body",label:"Add Post Here....",multiline:!0,rows:10,rowsMax:30,onChange:F,value:a}),s.a.createElement("div",{className:C.wordCount},"".concat(t," Characters")),s.a.createElement("h3",{className:C.title},"Tags"),s.a.createElement(me.a,{id:"tags",value:m,onChange:function(e,t){d(t.title),r(t.title)},inputValue:f,onInputChange:function(e,t){T(t)},options:Se,className:"tags",getOptionLabel:function(e){return e.title},style:{width:300},renderInput:function(e){return s.a.createElement(A.a,Object.assign({},e,{label:"Tags",variant:"outlined"}))}}),s.a.createElement("div",{className:C.chipContainer},s.a.createElement(s.a.Fragment,null,g.length>0&&g.map((function(e,t){return s.a.createElement(pe.a,{className:C.chip,index:t,label:e,color:"secondary",ref:W.current[t],onDelete:function(e){return function(e,t){var a=W.current[t].current.children[0].textContent;E(a)}(0,t)}})})))),s.a.createElement(I.a,{className:C.button,variant:"contained",color:"primary",onClick:function(e){return H.apply(this,arguments)}},"Submit Amends")))})),Oe=(a(220),a(170)),ve=(a(0).useEffect,Object(P.b)((function(e){return{isLoggedIn:e.isLoggedIn}}),null)((function(e){var t=e.Component,a=e.isLoggedIn,n=Object(Oe.a)(e,["Component","isLoggedIn"]);return Object(u.useLayoutEffect)((function(){}),[]),s.a.createElement(L.b,Object.assign({},n,{render:function(e){return a?s.a.createElement(t,null):s.a.createElement(L.a,{to:{pathname:"/login"}})}}))})));function ye(){var e=Object(r.a)(["\n    mutation addPost($newPost: newPost) {\n      addPost(post: $newPost) {\n        postTitle\n      }\n    }\n  "]);return ye=function(){return e},e}var Ce=a(0).useRef,_e=Object(E.a)((function(e){return{inputPost:{width:"80%",marginTop:"0"},formContainer:{display:"flex",justifyContent:"center",flexDirection:"column",marginTop:"0.5rem",alignContent:"center"},wordCount:{marginTop:"10px",color:"red"},title:{marginTop:"1rem"},chip:{width:""},chipContainer:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap","& > *":{margin:e.spacing(.5)},marginTop:"2rem",width:"30%"},tagInput:{width:"20%"},autocompleteInput:{},button:{marginTop:"20px",width:"15%"}}})),Ae=[{title:"Python"},{title:"Javascript"},{title:"Java"},{title:"HTML"},{title:"CSS"},{title:"C++"}],Ie=Object(P.b)((function(e){return{postText:e.postText,currentPostWordCount:e.currentPostWordCount,titleText:e.titleText,tagInputValue:e.tagInputValue,tagsArray:e.tagsArray,tagInputValueSelected:e.tagInputValueSelected,submitSuccessful:e.submitSuccessful,userId:e.userId}}),(function(e){return{addPostToLocalState:function(t){return e(W(t))},addTitleToLocalState:function(t){return e(k(t))},addTagsToLocalState:function(t){return e(D(t))},addTagInputToLocalState:function(t){return e(U(t))},addTagInputSelectedToLocalState:function(t){return e(G(t))},deleteTagFromState:function(t){return e(F(t))},getPostFromLocalState:function(){return e({type:"GET_POST_FROM_LOCAL_STATE"})},submitSuccessfulDispatch:function(){return e({type:"SUBMIT_SUCCESSFUL"})},resetPostState:function(){return e({type:"RESET_POST_STATE"})}}}))((function(e){e.props;var t=e.currentPostWordCount,a=e.postText,r=e.addTagsToLocalState,c=e.addPostToLocalState,l=e.titleText,p=e.addTitleToLocalState,m=e.tagInputValue,d=e.addTagInputToLocalState,g=e.tagsArray,f=e.tagInputValueSelected,T=e.addTagInputSelectedToLocalState,E=e.deleteTagFromState,S=(e.getPostFromLocalState,e.submitSuccessful),h=e.submitSuccessfulDispatch,O=e.userId,y=e.resetPostState,C=_e(),_=Ce([]);_.current.length!==g.length&&(_.current=Array(g.length).fill().map((function(e,t){return _.current[t]||Object(u.createRef)()})));var j=Object(N.b)(w()(ye())),x=Object(n.a)(j,2),P=x[0];x[1];Object(u.useEffect)((function(){y()}),[]);Ce(null);var R=function(e){e.preventDefault();var t=e.target.value;switch(e.target.id){case"post-body":return void c(t);case"post-title":return void p(t);default:return}};function W(){return(W=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={postContent:a,postTitle:l,tags:g,user:O},e.prev=2,e.next=5,P({variables:{newPost:n}});case 5:h(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),alert("There was an error");case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}return S?s.a.createElement(L.a,{to:"/"}):s.a.createElement(b.a,null,s.a.createElement(v.a,null),s.a.createElement("form",{className:C.formContainer},s.a.createElement("h2",{className:C.title},"Post Title"),s.a.createElement(A.a,{className:C.inputPost,onChange:R,value:l,id:"post-title"}),s.a.createElement("h2",{className:C.title},"Content"),s.a.createElement(A.a,{className:C.inputPost,id:"post-body",label:"Add Post Here....",multiline:!0,rows:10,rowsMax:30,onChange:R,value:a}),s.a.createElement("div",{className:C.wordCount},"".concat(t," Characters")),s.a.createElement("h3",{className:C.title},"Tags"),s.a.createElement(me.a,{id:"tags",value:m,onChange:function(e,t){d(t.title),r(t.title)},inputValue:f,onInputChange:function(e,t){T(t)},options:Ae,className:"tags",getOptionLabel:function(e){return e.title},style:{width:300},renderInput:function(e){return s.a.createElement(A.a,Object.assign({},e,{label:"Tags",variant:"outlined"}))}}),s.a.createElement("div",{className:C.chipContainer},s.a.createElement(s.a.Fragment,null,g.map((function(e,t){return s.a.createElement(pe.a,{className:C.chip,index:t,label:e,color:"secondary",ref:_.current[t],onDelete:function(e){return function(e,t){var a=_.current[t].current.children[0].textContent;E(a)}(0,t)}})})))),s.a.createElement(I.a,{className:C.button,variant:"contained",color:"primary",onClick:function(e){return W.apply(this,arguments)}},"Add Post")))})),je=a(286),xe=a(290),we=a(289),Ne=a(285),Le=a(287),Pe=a(288),Re=a(228),We=a(164),ke=a.n(We),De=a(165),Ue=a.n(De),Ge=a(298),Fe=a(294),He=a(292),Me=a(293),Ve=a(291);function Be(){var e=Object(r.a)(["\n    mutation deletePost($postId: String) {\n        deletePost(postId: $postId)\n\n    }\n"]);return Be=function(){return e},e}function $e(){var e=Object(r.a)(["\n    query getAllPosts($userId: String){\n        posts(userId: $userId){\n            views\n            _id\n            postTitle\n            postDate\n            likes\n       \n        }\n    }\n    \n"]);return $e=function(){return e},e}var qe=a(0).useRef,ze=a(0).useState,Je=(a(0).useEffect,Object(E.a)({table:{minWidth:650},container:{width:"80%",margin:"auto",marginTop:"20px"}}));var Qe=w()($e()),Xe=w()(Be()),Ye=Object(P.b)((function(e){return{userId:e.userId}}),null)((function(e){e.props;var t=e.userId,a=Object(N.c)(Qe,{onCompleted:function(){return console.log("went for data")},pollInterval:500,variables:{userId:t},fetchPolicy:"no-cache"}),r=a.data,c=a.error,l=a.loading,u=qe("ok"),p=qe("cancel"),m=qe([]);r&&m.current.length!==r.posts.length&&(m.current=Array(r.posts.length).fill().map((function(e,t){return m.current[t]||s.a.createRef()})));var d=ze(!1),g=Object(n.a)(d,2),f=g[0],T=g[1],E=ze(null),b=Object(n.a)(E,2),S=b[0],h=b[1],O=ze(!1),v=Object(n.a)(O,2),y=v[0],C=v[1],_=ze(null),A=Object(n.a)(_,2),j=A[0],x=A[1],w=Object(N.b)(Xe,{}),P=Object(n.a)(w,2),R=P[0],W=(P[1],function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R({variables:{postId:t}});case 2:if(a=e.sent,n=a.data,r=a.error,c=a.loading,!r){e.next=8;break}throw r;case 8:return c&&console.log("loading...."),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k=function(){var e=Object(i.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.current[S],e.next=3,W(r.posts[S]._id);case 3:h(null),T(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),D=function(e){T(!1)},U=Je();return l?s.a.createElement(de.a,null):c?s.a.createElement("div",null,"".concat(c," There has beena an error, please refresh the page.")):y?s.a.createElement(L.a,{to:"/edit_post/".concat(j)}):s.a.createElement(s.a.Fragment,null,s.a.createElement(Ne.a,{component:Re.a,className:U.container},s.a.createElement(je.a,{className:U.table,"aria-label":"simple table"},s.a.createElement(Le.a,null,s.a.createElement(Pe.a,null,s.a.createElement(we.a,{align:"center"},"Post Title"),s.a.createElement(we.a,{align:"center"},"Post Date"),s.a.createElement(we.a,{align:"center"},"Likes"),s.a.createElement(we.a,{align:"center"},"Edit"))),s.a.createElement(xe.a,null,r.posts.map((function(e,t){return s.a.createElement(Pe.a,{ref:m.current[t],postId:e._id},s.a.createElement(we.a,{align:"center"},e.postTitle),s.a.createElement(we.a,{align:"center"},e.postDate),s.a.createElement(we.a,{align:"center"},e.likes),s.a.createElement(we.a,{align:"center"},s.a.createElement(ke.a,{onClick:function(){return function(e){T(!0),h(e)}(t)}}),s.a.createElement(Ue.a,{onClick:function(){return function(e){console.log("clicked"),h(e);var t=r.posts[e];x(t._id),C(!0)}(t)}})))}))))),s.a.createElement(Ge.a,{open:f,onClose:D},s.a.createElement(Ve.a,null,"Are you Sure? "),s.a.createElement(He.a,null,s.a.createElement(Me.a,null,"Are you sure you want to delete this post - deleted posts cannot be recovered.")),s.a.createElement(Fe.a,null,s.a.createElement(I.a,{ref:u,onClick:k},"Ok"),s.a.createElement(I.a,{ref:p,onClick:D},"Cancel"))))})),Ke=a(166);function Ze(){var e=Object(r.a)(["\n  query getSpecific($postId: String) {\n    getSpecificPost(postId: $postId) {\n      postTitle\n      postContent\n      tags\n    }\n  }\n"]);return Ze=function(){return e},e}var et=X()((function(){return{container:{width:"80%",margin:"auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},paragraph:{textAlign:"center",marginBottom:"10px",marginTop:"20px"},title:{textAlign:"center",marginBottom:"10px",marginTop:"20px",fontSize:"2rem"},headerImage:{width:"800px",height:"250px",backgroundColor:"gray",marginTop:"20px"}}})),tt=w()(Ze()),at=Object(P.b)((function(){return{}}),(function(){return{}}))((function(e){Object(Ke.a)(e);var t=et(),a=Object(L.g)().id;return s.a.createElement(b.a,{className:t.container},s.a.createElement(Y.a,{query:tt,variables:{postId:a}},(function(e){var a=e.data,n=e.loading,r=e.error;return n?s.a.createElement(de.a,null):r?"Something Went Wrong. ".concat(r):s.a.createElement(C.a,{className:t.container},s.a.createElement(C.a,null,s.a.createElement(S.a,{className:t.title},a.getSpecificPost.postTitle)),s.a.createElement(C.a,null,s.a.createElement(S.a,{className:t.paragraph},a.getSpecificPost.postContent)))})))}));function nt(){var e=Object(r.a)(["\n  mutation createUserAccount($user: createUser) {\n    createUserAccount(user: $user) {\n      email\n    }\n  }\n"]);return nt=function(){return e},e}a(0).useEffect;var rt=Object(E.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1),display:"flex",flexDirection:"column"},submit:{margin:e.spacing(3,0,2)},warning:{color:"red"}}})),ct=w()(nt()),ot=Object(P.b)((function(e){return{isLoggedIn:e.isLoggedIn,loginWarning:e.loginWarning,createAccountWarning:e.createAccountWarning,userId:e.userId,accountCreatedSuccess:e.accountCreatedSuccess}}),(function(e){return{changeLoginWarningToFalse:function(){return e({type:"CHANGE_LOGIN_WARNING_FALSE"})},changeLoginWarningToTrue:function(){return e({type:"CHANGE_LOGIN_WARNING_TRUE"})},changeLoginStatusToTrue:function(){return e({type:"CHANGE_LOGIN_STATUS_TRUE"})},getState:function(){return e({type:"DEFAULT"})},setUserIdInState:function(t){return e(H(t))},changeCreateAccountWarningToTrue:function(){return e({type:"CHANGE_CREATE_ACCOUNT_WARNING_TO_TRUE"})},changeCreateAccountWarningToFalse:function(){return e({type:"CHANGE_CREATE_ACCOUNT_WARNING_TO_FALSE"})},setAccountCreatedSuccess:function(){return e({type:"ACCOUNT_CREATED"})}}}))((function(e){var t=e.isLoggedIn,a=(e.loginWarning,e.changeLoginWarningToFalse,e.changeLoginWarningToTrue,e.changeLoginStatusToTrue,e.setUserIdInState,e.changeCreateAccountWarningToTrue),r=e.changeCreateAccountWarningToFalse,c=e.createAccountWarning,l=e.setAccountCreatedSuccess,p=e.accountCreatedSuccess,m=rt(),d=Object(N.a)(),g=Object(N.b)(ct),E=Object(n.a)(g,1)[0],h=Object(u.useState)({email:"",password:""}),x=Object(n.a)(h,2),w=x[0],P=x[1],R=Object(u.useState)(!1),W=Object(n.a)(R,2),k=(W[0],W[1],Object(u.useState)(!1)),D=Object(n.a)(k,2),U=D[0],G=D[1],F=Object(M.b)().enqueueSnackbar,H=function(){var e=w.email;return/\S+@\S+\.\S+/.test(e)},V=function(){var e=/^(?:[0-9]+[a-z]|[a-z]+[0-9])/i.test(w.password);return!(!/\w{8,}/.test(w.password)||!e)},B=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var c,i,u,p,m,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c=H(),i=V(),c&&i){e.next=8;break}a(),setTimeout((function(){r()}),4e3),e.next=19;break;case 8:return e.next=10,E({variables:{user:{email:w.email,password:w.password}}});case 10:if(u=e.sent,p=u.data,m=u.error,d=u.loading,!m){e.next=16;break}throw m;case 16:if(!d){e.next=18;break}return e.abrupt("return",s.a.createElement(de.a,null));case 18:"already exists"===p.createUserAccount.email?(console.log(p.createUserAccount),G(!0),G(!1)):null===p.createUserAccount.email?alert("Something went wrong. "):l();case 19:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),$=function(e){P(Object(T.a)(Object(T.a)({},w),{},Object(f.a)({},e.target.name,e.target.value)))};return t?s.a.createElement(L.a,{to:"/"}):p?s.a.createElement(L.a,{to:"/login"}):s.a.createElement(s.a.Fragment,null,s.a.createElement(b.a,{className:m.root,maxWidth:"xs"},s.a.createElement(v.a,null),U&&F("User Already Exists!",{variant:"error"}),s.a.createElement("div",{className:m.paper},s.a.createElement(y.a,{className:m.avatar},s.a.createElement(O.a,null)),s.a.createElement(S.a,{component:"h1",variant:"h5"},"Create Account"),c&&s.a.createElement(C.a,{className:m.warning},"Please enter a valid email address and/or password."),s.a.createElement("form",{className:m.form,noValidate:!0},s.a.createElement(A.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,error:c,helperText:c?"Please Enter a valid email address.":"",onChange:$,value:w.email,id:"email",label:"email address",name:"email",autoComplete:"email",autoFocus:!0}),s.a.createElement(A.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,error:c,helperText:c?"Please make sure password is atleast 8 characters long, with a mixture of letters and numbers.":"",onChange:$,value:w.password,id:"password",label:"password",name:"password",type:"password",autoComplete:"current-password"}),s.a.createElement(I.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(e){return B(e,d)},className:m.submit},"Create Account"),s.a.createElement(j.a,{container:!0},s.a.createElement(j.a,{item:!0},s.a.createElement(_.a,{href:"/login",variant:"body2"},"Already have an account? Log In")))))))}));var it=Object(P.b)((function(e){return{isLoggedIn:e.isLoggedIn}}),(function(){return{}}))((function(e){return e.isLoggedIn,s.a.createElement(p.a,{theme:g},s.a.createElement(se,null),s.a.createElement(L.d,null,s.a.createElement(ve,{Component:ie,exact:!0,path:"/"}),s.a.createElement(ve,{Component:ie,exact:!0,path:"/home"}),s.a.createElement(ve,{Component:Ie,exact:!0,path:"/add_post"}),s.a.createElement(ve,{Component:Ye,exact:!0,path:"/all_posts"}),s.a.createElement(ve,{Component:he,exact:!0,path:"/edit_post/:id"}),s.a.createElement(ve,{Component:at,exact:!0,path:"/post/:id"}),s.a.createElement(L.b,{exact:!0,path:"/login"},s.a.createElement(q,null)),s.a.createElement(L.b,{exact:!0,path:"/create_account"},s.a.createElement(ot,null))))})),lt=a(20),ut=a(16),st=a.n(ut);function pt(){var e=Object(r.a)(["\n    extend type Query {\n        state: String\n        isLoggedIn: Boolean\n        loginWarning: Boolean\n        anyState: String\n    }\n    \n    extend type Mutation {\n        loginWarning(bool:Boolean):Boolean\n        isLoggedInMutation:Boolean\n            \n    }\n"]);return pt=function(){return e},e}var mt=w()(pt()),dt=a(69),gt=a(167),ft=a(118),Tt={isLoggedIn:!1,loginWarning:!1},Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(T.a)({},e);case"CHANGE_LOGIN_WARNING_FALSE":return Object(T.a)(Object(T.a)({},e),{},{loginWarning:!1});case"CHANGE_LOGIN_WARNING_TRUE":return Object(T.a)(Object(T.a)({},e),{},{loginWarning:!0});case"CHANGE_LOGIN_STATUS_TRUE":return Object(T.a)(Object(T.a)({},e),{},{isLoggedIn:!0});case"ADD_TITLE_TO_STATE":return Object(T.a)(Object(T.a)({},e),{},{titleText:t.payload});case"ADD_TAG_INPUT_TO_STATE":return Object(T.a)(Object(T.a)({},e),{},{tagInputValue:t.payload});case"ADD_TAGS_TO_STATE":return Object(T.a)(Object(T.a)({},e),{},{tagsArray:[].concat(Object(ft.a)(e.tagsArray),[t.payload])});case"RESET_TAGS_STATE":return Object(T.a)(Object(T.a)({},e),{},{tagsArray:[]});case"GET_POST_FROM_LOCAL_STATE":return Object(T.a)({},e);case"RESET_POST_STATE":return Object(T.a)(Object(T.a)({},e),{},{titleText:"",postText:"",tagsArray:[]});case"SET_POSTS":return Object(T.a)(Object(T.a)({},e),{},{allPosts:[].concat(Object(ft.a)(e.allPosts),Object(ft.a)(t.payload))});case"SET_USER_ID_IN_STATE":return Object(T.a)(Object(T.a)({},e),{},{userId:t.payload});case"SET_SEARCH_STATE":return Object(T.a)(Object(T.a)({},e),{},{searchInputState:t.payload});case"ADD_TAG_INPUT_SELECTED_TO_STATE":return Object(T.a)(Object(T.a)({},e),{},{tagInputValueSelected:t.payload});case"SET_SEARCH_REGEX":return Object(T.a)(Object(T.a)({},e),{},{searchRegex:t.payload});case"REMOVE_TAG_FROM_TAG_ARRAY":return Object(T.a)(Object(T.a)({},e),{},{tagsArray:e.tagsArray.filter((function(e){return e!==t.payload}))});case"SUBMIT_SUCCESSFUL":return Object(T.a)(Object(T.a)({},e),{},{submitSuccessful:!0});case"RESET_SUBMIT":return Object(T.a)(Object(T.a)({},e),{},{submitSuccessful:!1});case"ADD_POST_TO_STATE":return Object(T.a)(Object(T.a)({},e),{},{currentPostWordCount:t.payload.length,postText:t.payload});case"SET_POST_TO_READ":return Object(T.a)(Object(T.a)({},e),{},{postToRead:t.payload});case"LOGOUT":return Object(T.a)(Object(T.a)({},e),{},{isLoggedIn:!1,userId:""});case"CHANGE_CREATE_ACCOUNT_WARNING_TO_TRUE":return Object(T.a)(Object(T.a)({},e),{},{createAccountWarning:!0});case"CHANGE_CREATE_ACCOUNT_WARNING_TO_FALSE":return Object(T.a)(Object(T.a)({},e),{},{createAccountWarning:!1});case"ACCOUNT_CREATED":return Object(T.a)(Object(T.a)({},e),{},{accountCreatedSuccess:!0});case"ACCOUNT_CREATED_SUCCESS_TO_FALSE":return Object(T.a)(Object(T.a)({},e),{},{accountCreatedSuccess:!1});default:return Object(T.a)({},e)}},bt=a(168),St=[gt.a],ht=Object(dt.createStore)(Et,{allPosts:[],isLoggedIn:!1,accountCreatedSuccess:!1,userId:"",loginWarning:!1,createAccountWarning:!1,postText:"",currentPostWordCount:0,titleText:"",tagsArray:[],tagInputValue:"",tagInputValueSelected:"",submitSuccessful:!1,searchInputState:"",searchRegex:"",postToRead:""},Object(bt.composeWithDevTools)(dt.applyMiddleware.apply(void 0,St)));a(221);function Ot(){var e=Object(r.a)(["\n          query isLoggedIn {\n            isLoggedIn @client\n          }\n        "]);return Ot=function(){return e},e}var vt=a(0).useState,yt=a(0).useEffect,Ct=a(224).gql,_t=a(78).HttpLink,At=a(68).InMemoryCache,It={Mutation:{loginWarning:function(e,t,a,n){return Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.cache.writeData({data:{loginWarning:t.bool}}),e.abrupt("return",t.bool);case 3:case"end":return e.stop()}}),e)})))()},isLoggedInMutation:function(e,t,a,n){return Object(i.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.cache,e.next=3,t.readQuery({query:Ct(Ot())});case 3:return n=e.sent,r=!(r=n.isLoggedIn),console.log("running mutation, changing to ".concat(r)),e.next=9,t.writeData({data:{isLoggedIn:r}});case 9:case"end":return e.stop()}}),e)})))()}}};(function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){var e=vt(void 0),t=Object(n.a)(e,2),a=t[0],r=t[1];return yt(Object(i.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new At,a=new _t({uri:"http://localhost:4000"}),n=new l.a({cache:t,link:a,typeDefs:mt,resolvers:It}),r(n);case 4:case"end":return e.stop()}}),e)}))),[]),void 0===a?s.a.createElement("div",null,"Loading..."):s.a.createElement(le.a,{basename:"/"},s.a.createElement(P.a,{store:ht},s.a.createElement(lt.a,{client:a},s.a.createElement(M.a,{maxSnack:3},s.a.createElement(it,null)))))},st.a.render(s.a.createElement(t,null),document.getElementById("root"));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}},[[184,1,2]]]);
//# sourceMappingURL=main.27f501a3.chunk.js.map